<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SelectBook – Online Test Engine</title>
<style>
  *{box-sizing:border-box;}
  body{
    margin:0;
    font-family:Arial, sans-serif;
    background:#f4f6fb;
    color:#222;
  }
  .navbar{
    background:#0d47a1;
    color:#fff;
    padding:10px 16px;
    font-weight:bold;
  }
  .container{
    max-width:900px;
    margin:16px auto 30px;
    background:#fff;
    border-radius:10px;
    box-shadow:0 2px 8px rgba(0,0,0,0.08);
    padding:16px 16px 20px;
  }
  .test-header{
    display:flex;
    justify-content:space-between;
    align-items:flex-start;
    flex-wrap:wrap;
    gap:10px;
    margin-bottom:12px;
  }
  .test-title{
    font-size:18px;
    font-weight:bold;
  }
  .meta-line{
    font-size:13px;
    color:#555;
  }
  .timer-box{
    background:#e3f2fd;
    padding:8px 12px;
    border-radius:8px;
    font-size:14px;
  }
  .timer-label{font-weight:bold;color:#0d47a1;}
  .timer-value{font-weight:bold;}

  .question-box{
    margin-top:10px;
    border-top:1px solid #ddd;
    padding-top:10px;
  }
  .q-number{
    font-size:14px;
    color:#0d47a1;
    margin-bottom:4px;
  }
  .q-text{
    font-size:16px;
    margin-bottom:10px;
  }
  .options{
    list-style:none;
    padding:0;
    margin:0 0 10px;
  }
  .options li{
    margin-bottom:6px;
  }
  .options label{
    display:flex;
    align-items:flex-start;
    gap:6px;
    font-size:14px;
    cursor:pointer;
  }
  .options input{
    margin-top:3px;
  }

  .nav-buttons{
    display:flex;
    justify-content:space-between;
    flex-wrap:wrap;
    gap:8px;
    margin-top:10px;
  }
  .btn{
    border:none;
    border-radius:6px;
    padding:8px 14px;
    font-size:14px;
    cursor:pointer;
  }
  .btn-primary{
    background:#0d47a1;
    color:#fff;
  }
  .btn-secondary{
    background:#e0e0e0;
    color:#222;
  }
  .btn-outline{
    background:#fff;
    color:#0d47a1;
    border:1px solid #0d47a1;
  }
  .btn:disabled{
    opacity:0.5;
    cursor:not-allowed;
  }

  .questions-status{
    margin-top:14px;
    font-size:13px;
    color:#555;
  }
  .pill{
    display:inline-block;
    padding:2px 8px;
    border-radius:12px;
    font-size:11px;
    margin-right:4px;
  }
  .pill-attempted{background:#c8e6c9;color:#1b5e20;}
  .pill-not{background:#ffebee;color:#b71c1c;}

  .result-box{
    margin-top:10px;
    background:#e3f2fd;
    padding:12px;
    border-radius:10px;
    font-size:14px;
  }
  .result-title{
    font-weight:bold;
    margin-bottom:6px;
    color:#0d47a1;
  }
  .result-line{margin:2px 0;}

  .alert{
    margin-top:8px;
    font-size:13px;
    color:#b71c1c;
  }

  .footer-info{
    text-align:center;
    font-size:12px;
    color:#777;
    margin-top:16px;
  }

  @media(max-width:600px){
    .test-header{flex-direction:column;}
  }
</style>
</head>
<body>

<div class="navbar">
  SelectBook – Demo Test Engine (SSC CGL)
</div>

<div class="container">

  <div class="test-header">
    <div>
      <div class="test-title">SSC CGL Tier-I Demo Test</div>
      <div class="meta-line">10 Questions • 10 Minutes • 2 Marks per Question • No Negative (Demo)</div>
    </div>
    <div class="timer-box">
      <div class="timer-label">Time Left:</div>
      <div class="timer-value" id="timer">10:00</div>
    </div>
  </div>

  <div id="test-area">
    <!-- Question will be injected here -->
  </div>

  <div id="alert" class="alert" style="display:none;"></div>

  <div id="result" class="result-box" style="display:none;"></div>

  <div class="footer-info">
    Demo Layout by SelectBook – Real Engine के लिए यही base आगे बढ़ेगा।
  </div>

</div>

<script>
// ====== CONFIG (यहाँ से आप बाद में बदलाव कर सकते हैं) ======
const totalTimeSeconds = 10 * 60; // 10 minutes
const questions = [
  {
    q: "1. भारत की राजधानी कौन सी है?",
    options: ["मुंबई", "दिल्ली", "कोलकाता", "चेन्नई"],
    answer: 1
  },
  {
    q: "2. 15 + 27 = ?",
    options: ["32", "40", "42", "44"],
    answer: 2
  },
  {
    q: "3. 'राजा राम मोहन राय' किस सुधार आंदोलन से जुड़े हैं?",
    options: ["आर्य समाज", "ब्रह्म समाज", "रामकृष्ण मिशन", "अलीगढ़ आंदोलन"],
    answer: 1
  },
  {
    q: "4. \"He ___ playing cricket.\" सही विकल्प भरें:",
    options: ["am", "is", "are", "were"],
    answer: 1
  },
  {
    q: "5. यदि किसी वस्तु का क्रय मूल्य ₹500 है और लाभ 10% है, तो विक्रय मूल्य क्या होगा?",
    options: ["₹510", "₹550", "₹600", "₹450"],
    answer: 1
  },
  {
    q: "6. भारत का राष्ट्रीय पशु कौन है?",
    options: ["शेर", "हाथी", "बाघ", "हिरण"],
    answer: 2
  },
  {
    q: "7. 2, 4, 8, 16, ? अगला पद क्या होगा?",
    options: ["20", "24", "32", "30"],
    answer: 2
  },
  {
    q: "8. संविधान का \"अनुच्छेद 370\" किस प्रदेश से संबंधित था?",
    options: ["पंजाब", "जम्मू-कश्मीर", "असम", "नागालैंड"],
    answer: 1
  },
  {
    q: "9. 'CPU' का पूर्ण रूप क्या है?",
    options: [
      "Central Processing Unit",
      "Central Power Unit",
      "Control Processing Unit",
      "Central Program Unit"
    ],
    answer: 0
  },
  {
    q: "10. किसी त्रिभुज के आंतरिक कोणों का योग कितना होता है?",
    options: ["90°", "120°", "180°", "360°"],
    answer: 2
  }
];

// ====== ENGINE LOGIC ======
let currentIndex = 0;
let userAnswers = new Array(questions.length).fill(null);
let timeLeft = totalTimeSeconds;
let timerId = null;
let submitted = false;

const testArea = document.getElementById("test-area");
const alertBox = document.getElementById("alert");
const resultBox = document.getElementById("result");
const timerDisplay = document.getElementById("timer");

function startTimer() {
  updateTimerUI();
  timerId = setInterval(() => {
    if (timeLeft <= 0) {
      clearInterval(timerId);
      autoSubmit();
    } else {
      timeLeft--;
      updateTimerUI();
    }
  }, 1000);
}

function updateTimerUI() {
  const m = Math.floor(timeLeft / 60);
  const s = timeLeft % 60;
  timerDisplay.textContent =
    String(m).padStart(2, "0") + ":" + String(s).padStart(2, "0");
}

function renderQuestion() {
  const qObj = questions[currentIndex];

  let html = `
    <div class="question-box">
      <div class="q-number">Question ${currentIndex + 1} of ${questions.length}</div>
      <div class="q-text">${qObj.q}</div>
      <ul class="options">
  `;

  qObj.options.forEach((opt, idx) => {
    const checked = userAnswers[currentIndex] === idx ? "checked" : "";
    html += `
      <li>
        <label>
          <input type="radio" name="option" value="${idx}" ${checked}>
          <span>${opt}</span>
        </label>
      </li>
    `;
  });

  html += `
      </ul>
      <div class="nav-buttons">
        <button class="btn btn-secondary" id="prevBtn">Previous</button>
        <div style="display:flex;gap:8px;">
          <button class="btn btn-outline" id="clearBtn">Clear</button>
          <button class="btn btn-primary" id="nextBtn">Next</button>
          <button class="btn btn-primary" id="submitBtn">Submit Test</button>
        </div>
      </div>
      <div class="questions-status">
        <span class="pill pill-attempted">Attempted: <span id="attemptedCount">0</span></span>
        <span class="pill pill-not">Not Attempted: <span id="notAttemptedCount">0</span></span>
      </div>
    </div>
  `;

  testArea.innerHTML = html;

  // set button states
  document.getElementById("prevBtn").disabled = currentIndex === 0;
  document.getElementById("nextBtn").disabled = currentIndex === questions.length - 1;

  // attach events
  const optionInputs = document.querySelectorAll('input[name="option"]');
  optionInputs.forEach(input => {
    input.addEventListener("change", () => {
      userAnswers[currentIndex] = Number(input.value);
      updateStatusCounts();
    });
  });

  document.getElementById("prevBtn").addEventListener("click", () => {
    saveSelected();
    if (currentIndex > 0) {
      currentIndex--;
      renderQuestion();
    }
  });

  document.getElementById("nextBtn").addEventListener("click", () => {
    saveSelected();
    if (currentIndex < questions.length - 1) {
      currentIndex++;
      renderQuestion();
    }
  });

  document.getElementById("clearBtn").addEventListener("click", () => {
    userAnswers[currentIndex] = null;
    renderQuestion();
  });

  document.getElementById("submitBtn").addEventListener("click", manualSubmit);

  updateStatusCounts();
}

function saveSelected() {
  const selected = document.querySelector('input[name="option"]:checked');
  if (selected) {
    userAnswers[currentIndex] = Number(selected.value);
  }
}

function updateStatusCounts() {
  const attempted = userAnswers.filter(v => v !== null).length;
  const notAttempted = questions.length - attempted;
  const aSpan = document.getElementById("attemptedCount");
  const nSpan = document.getElementById("notAttemptedCount");
  if (aSpan && nSpan) {
    aSpan.textContent = attempted;
    nSpan.textContent = notAttempted;
  }
}

function manualSubmit() {
  showAlert("क्या आप वाकई टेस्ट सबमिट करना चाहते हैं? अगर हाँ तो फिर से Submit दबाएँ।");
  // पहली बार चेतावनी, दूसरी बार सच में submit
  document.getElementById("submitBtn").removeEventListener("click", manualSubmit);
  document.getElementById("submitBtn").addEventListener("click", submitTest);
}

function autoSubmit() {
  showAlert("Time over! टेस्ट अपने-आप सबमिट कर दिया गया है।");
  submitTest();
}

function submitTest() {
  if (submitted) return;
  submitted = true;
  clearInterval(timerId);
  hideAlert();

  let correct = 0;
  let wrong = 0;
  let notAttempted = 0;

  questions.forEach((q, idx) => {
    const ua = userAnswers[idx];
    if (ua === null) {
      notAttempted++;
    } else if (ua === q.answer) {
      correct++;
    } else {
      wrong++;
    }
  });

  const marksPerQ = 2;
  const negative = 0; // अभी demo में negative नहीं
  const score = correct * marksPerQ - wrong * negative;
  const totalMarks = questions.length * marksPerQ;
  const percent = ((score / totalMarks) * 100).toFixed(2);

  resultBox.style.display = "block";
  resultBox.innerHTML = `
    <div class="result-title">Result Summary</div>
    <div class="result-line">Total Questions: ${questions.length}</div>
    <div class="result-line">Attempted: ${questions.length - notAttempted}</div>
    <div class="result-line">Correct: ${correct}</div>
    <div class="result-line">Wrong: ${wrong}</div>
    <div class="result-line">Not Attempted: ${notAttempted}</div>
    <div class="result-line">Score: ${score} / ${totalMarks}</div>
    <div class="result-line">Percentage: ${percent}%</div>
  `;

  // टेस्ट area को केवल review mode में रहने दें (navigation off)
  const buttons = testArea.querySelectorAll("button");
  buttons.forEach(b => b.disabled = true);
}

function showAlert(msg) {
  alertBox.textContent = msg;
  alertBox.style.display = "block";
}
function hideAlert() {
  alertBox.style.display = "none";
}

// Start
renderQuestion();
startTimer();
</script>

</body>
</html>